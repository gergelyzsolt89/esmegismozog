<!DOCTYPE html>
<html>
  <head>
    <title>És mégis mozog... az ember</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
    .w3-sidebar a {font-family: "Roboto", sans-serif}
    body,h1,h2,h3,h4,h5,h6,.w3-wide {font-family: "Montserrat", sans-serif;}
    </style>
    <script type="text/javascript" src="https://static.sketchfab.com/api/sketchfab-viewer-1.12.1.js"></script>
  </head>
<body class="w3-content" style="max-width:1200px">

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-bar-block w3-white w3-collapse w3-top" style="z-index:3;width:250px" id="mySidebar">
  <div class="w3-container w3-display-container w3-padding-16">
    <i onclick="w3_close()" class="fa fa-remove w3-hide-large w3-button w3-display-topright"></i>
    <h3 onclick="show_welcome_content()" style="cursor:pointer" class="w3-wide"><b>ÉS MÉGIS MOZOG</b></h3>
  </div>
  <div class="w3-padding-16 w3-container w3-display-container">
    <h4><b>Gyakorlat kategóriák</b></h4>
  </div>
  <div class="w3-large w3-text-grey" style="font-weight:bold">
    <a onclick="toggle_accordion(this)" href="javascript:void(0)" class="w3-button w3-block w3-white w3-left-align" id="tolo_gyakorlatok">
      Toló gyakorlatok <i class="fa fa-caret-right"></i>
    </a>
    <div id="tolo_gyakorlatok_acc" class="w3-bar-block w3-hide w3-padding-large w3-medium">
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="fekvotamasz_huzodzkodon_magas">Fekvőtámasz alacsony húzódzkodón (könnyebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="fekvotamasz_huzodzkodon_alacsony">Fekvőtámasz alacsony húzódzkodón (nehezebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="fekvotamasz_terdelesben">Fekvőtámasz térdelésben</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="teljes_fekvotamasz">Teljes fekvőtámasz</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button intermediate" id="szuk_fekvotamasz">Szűk fekvőtámasz</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button intermediate" id="felemas_fekvotamasz">Felemás fekvőtámasz</a>
    </div>
    <a onclick="toggle_accordion(this)" href="javascript:void(0)" class="w3-button w3-block w3-white w3-left-align" id="huzo_gyakorlatok">
      Húzó gyakorlatok <i class="fa fa-caret-right"></i>
    </a>
    <div id="huzo_gyakorlatok_acc" class="w3-bar-block w3-hide w3-padding-large w3-medium">
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="huzodzkodas_allva">Húzódzkodás állva</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="vizszintes_huzodzkodas_konnyebb">Vízszintes húzódzkodás (könnyebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="vizszintes_huzodzkodas_nehezebb">Vízszintes húzódzkodás (nehezebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="huzodzkodas_konnyitve">Húzódzkodás könnyítve</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="lapocka_huzodzkodas">Lapocka húzódzkodás</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="feszitve_fuggeszkedes">Feszítve függeszkedés</a>
      <!-- <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button intermediate" id="teljes_huzodzkodas">Teljes húzódzkodás</a> -->
    </div>
  </div>
</nav>

<!-- Top menu on small screens -->
<header class="w3-bar w3-top w3-hide-large w3-black w3-large">
  <div onclick="show_welcome_content()" style="cursor:pointer" class="w3-bar-item w3-padding-24 w3-wide">ÉS MÉGIS MOZOG</div>
  <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding-24 w3-right" onclick="w3_open()"><i class="fa fa-bars"></i></a>
</header>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main w3-hide" id="exercise_content" style="margin-left:250px">

  <!-- Push down content on small screens -->
  <div class="w3-hide-large" style="margin-top:83px"></div>
  
  <!-- Top header -->
  <header class="w3-container w3-xlarge">
    <p class="w3-left" id="exercise-header"></p>
  </header>

  <!-- Sketchfab -->
  <div class="w3-display-container w3-container">
    <div class="sketchfab-container">
      <iframe class="sketchfab-iframe" src="" id="api-frame" frameborder="0" allow="autoplay; fullscreen; xr-spatial-tracking" xr-spatial-tracking execution-while-out-of-viewport execution-while-not-rendered web-share allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
    </div>
    <div class="w3-display-container w3-container w3-light-grey w3-small w3-center" style="height:90px">
      <p id="annotations-sync"></p>
    </div>
  </div>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
  <script src="https://kit.fontawesome.com/8e657c9401.js" crossorigin="anonymous"></script>
</div>

<div class="w3-main" id="welcome_content" style="margin-left:250px">

  <!-- Push down content on small screens -->
  <div class="w3-hide-large" style="margin-top:83px"></div>
  
  <!-- Top header -->
  <header class="w3-container w3-xlarge">
    <p class="w3-left">Üdv az oldalon!</p>
  </header>

  <div class="w3-display-container w3-container">
    <p>Ezen a weboldalon több saját testsúlyos gyakorlat 3D-s animációját láthatod.</p>
    <p class="w3-hide-large">
      A gyakorlatok kategóriákba vannak sorolva, amiket a jobb felső sarokban lenyitható menüben érhetsz el.
      A kategóriákon belül fentről lefelé egyre nehezebbek a gyakorlatok, ezt színkóddal is jelöltük:
    </p>
    <p class="w3-hide-small w3-hide-medium">
      A gyakorlatok kategóriákba vannak sorolva, amiket a bal oldalon található menüben érhetsz el.
      A kategóriákon belül fentről lefelé egyre nehezebbek a gyakorlatok, ezt színkóddal is jelöltük:
    </p>
    <p class="novice" style="margin-left: 25px;padding-left:10px">
      Teljesen kezdő
    </p>
    <p class="beginner" style="margin-left: 25px;padding-left:10px">
      Kezdő
    </p>
    <p class="intermediate" style="margin-left: 25px;padding-left:10px">
      Középhaladó
    </p>
    <p class="advanced" style="margin-left: 25px;padding-left:10px">
      Haladó
    </p>
    <p class="elite" style="margin-left: 25px;padding-left:10px">
      Elit
    </p>
  </div>

</div>

<!-- End page content -->

<script>
// Accordion 
function toggle_accordion(element) {
  const acc = document.getElementById(element.id+"_acc");
  if (acc.classList.contains("w3-show")) {
    acc.classList.remove("w3-show");
    element.innerHTML = element.innerText + '<i class="fa fa-caret-right"></i>';
  } else {
    acc.classList.add("w3-show");
    element.innerHTML = element.innerText + '<i class="fa fa-caret-down"></i>';
  }
}

// Open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}
 
function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}

// Change content
function show_exercise_content() {
  const exercise_content = document.getElementById("exercise_content")
  if (exercise_content.classList.contains("w3-hide")) {
    exercise_content.classList.remove("w3-hide");
    document.getElementById("welcome_content").classList.add("w3-hide");
  }
  w3_close();
}

function show_welcome_content() {
  const welcome_content = document.getElementById("welcome_content")
  if (welcome_content.classList.contains("w3-hide")) {
    welcome_content.classList.remove("w3-hide");
    document.getElementById("exercise_content").classList.add("w3-hide");
  }
  const active_exercise_node = document.getElementById("active-exercise");
  if (active_exercise_node) {
    active_exercise_node.parentElement.classList.remove("w3-light-grey");
    active_exercise_node.remove();
  }
  w3_close();
}

var annotations_interval_id = -1;

function load_exercise(element) {
  const uids = {
    "fekvotamasz_huzodzkodon_magas": 'ca8591b7c59d47efaeca9c2b1e9e7fd1',
    "fekvotamasz_huzodzkodon_alacsony": 'acdd1a1c25f24742af3da28eedb1fd85',
    "fekvotamasz_terdelesben": '6555abb675d44898b73508ccd77959f0',
    "teljes_fekvotamasz": 'd9cd460de2514220bc1ebda84c578bfb',
    "szuk_fekvotamasz": '88bbb3554a3b491ba241a0d310d141c3',
    "felemas_fekvotamasz": '0df5638884044d60a26100f021fa4a50',
    "huzodzkodas_allva": '5c8622be369640858ed6947d07701e6b',
    "vizszintes_huzodzkodas_konnyebb": '84fccca398204a018d2b6d228fd72e66',
    "vizszintes_huzodzkodas_nehezebb": 'ed57a8e2c5c94e4881fb550f536c86fc',
    "huzodzkodas_konnyitve": '3441348df68f41e18e48f5357294fc52',
    "lapocka_huzodzkodas": '16efd5cc01f743748299b46ee3e26e89',
    "feszitve_fuggeszkedes": 'f43566b2baa24f62a7b34da2a7f3e22e'
  }

  const all_annotations = {
    "fekvotamasz_huzodzkodon_magas": [
      'Figyelj arra, hogy végig feszesen tartsd a törzsizmaid, beleértve a farizmokat is. A válltól a bokáig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A könyököd végig maradjon a tested mellett.',
      'A kiinduló helyzetben ne állj teljesen függőlegesen, maradjanak az izmok feszesen.'
    ],
    "fekvotamasz_huzodzkodon_alacsony": [
      'Figyelj arra, hogy végig feszesen tartsd a törzsizmaid, beleértve a farizmokat is. A válltól a bokáig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A könyököd végig maradjon a tested mellett.',
      'A mellkas majdnem megérinti a rudat az alsó pozícióban, a kiinduló helyzetben a könyökök szinte teljes nyújtva vannak.'
    ],
    "fekvotamasz_terdelesben": [
      'Figyelj arra, hogy végig feszesen tartsd a törzsizmaid, beleértve a farizmokat is. A válltól a térdig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A könyököd végig maradjon a tested mellett.',
      'A lábfejek lehetnek a levegőben, de a talajon is lehetnek lábujjhegyen. Ez utóbbi segíthet feszesebben tartani az alsó testet.',
      'Markold meg a talajt, ahogy a könnyebb gyakorlatoknál a rudat. A tenyér hüvelykujj felőli részét is végig tartsd a talajon.'
    ],
    "teljes_fekvotamasz": [
      'Tartsd végig feszesen a törzsizmaid, beleértve a farizmokat is. A válltól a bokáig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A térdek végig legyenek nyújtva, esetleg minimálisan hajlítva.',
      'Ha ebben a pozícióban valamiért fájdalmat érzel a csuklódban, átmenetileg megpróbálhatod öklön végezni a gyakorlatot.',
      'A nyak maradjon természetes szögben, nem szükséges megfeszíteni vagy megemelni a fejet. De ne lógasd a fejed.',
      'A könyököd végig maradjon a tested mellett.',
      'Markold meg a talajt, a tenyér hüvelykujj felőli részét is végig tartsd a talajon.'
    ],
    "szuk_fekvotamasz": [
      'Tartsd végig feszesen a törzsizmaid, beleértve a farizmokat is.',
      'A térdek végig legyenek nyújtva, esetleg minimálisan hajlítva.',
      'A tenyerek itt már nem párhuzamosak egymással, a mutatóujjak össze is érhetnek.',
      'A könyök a test mellett marad, az alkar az ujjak vonalában legyen.',
      'A tenyér hüvelykujj felőli részét is végig tartsd a talajon. Ennél a gyakorlatnál ez nehezebb!'
    ],
    "felemas_fekvotamasz": [
      'Tartsd végig feszesen a törzsizmaid, beleértve a farizmokat is.',
      'A térdek végig legyenek nyújtva, esetleg minimálisan hajlítva.',
      'A két kar nem egyformán dolgozik: a váll alatt maradó karnak kell a munka nagy részét elvégeznie.',
      'A kiinduló helyzetben nyújtott kar segít, de most még az alsó pozícióban behajlíthatod.',
      'A segítő kar minél távolabb van a testtől, annál kevesebbet tud segíteni.'
    ],
    "huzodzkodas_allva": [
      ''
    ],
    "vizszintes_huzodzkodas_konnyebb": [
      ''
    ],
    "vizszintes_huzodzkodas_nehezebb": [
      ''
    ],
    "huzodzkodas_konnyitve": [
      ''
    ],
    "lapocka_huzodzkodas": [
      ''
    ],
    "feszitve_fuggeszkedes": [
      ''
    ]
  }

  show_exercise_content();

  const exercise_header = document.getElementById( 'exercise-header' );
  exercise_header.innerText = element.innerText;
  const active_exercise_node = document.getElementById("active-exercise");
  if (active_exercise_node) {
    active_exercise_node.parentElement.classList.remove("w3-light-grey");
    active_exercise_node.remove();
  }
  element.innerHTML = '<i class="fa fa-caret-right w3-margin-right" id="active-exercise"></i>'+element.innerText;
  element.classList.add("w3-light-grey");

  clearInterval(annotations_interval_id);
  var textDiv = document.getElementById('annotations-sync');
  textDiv.innerHTML = '';

  const iframe = document.getElementById( 'api-frame' );
  const uid = uids[element.id];
  const annotations = all_annotations[element.id];
  
  // By default, the latest version of the viewer API will be used.
  var client = new Sketchfab( iframe );
  // Alternatively, you can request a specific version.
  // var client = new Sketchfab( '1.12.1', iframe );
  
  client.init( uid, {
    success: function onSuccess( api ){
        api.addEventListener( 'viewerready', function() {
            
            // API is ready to use
            
            // set BeStrong texture on models
            api.getMaterialList(function (err, materials) {
              for (var i = 0; i < materials.length; i++) {
                var m = materials[i];
                if (m.name == 'GEO-snow_shirt') {
                  api.addTexture('https://gergelyzsolt89.github.io/esmegismozog/GEO-snow_shirt.jpg', function(err, textureUid) {
                      if (!err) {
                          m.channels.AlbedoPBR.texture = {uid: textureUid};
                          m.channels.AlbedoPBR.color = false;
                          api.setMaterial(m);
                      }
                  });
                  break;
                }
              }
            });
            
            var l = annotations.length;
            var i = 0;
            textDiv.innerHTML = annotations[i];
            annotations_interval_id = setInterval(function () {
              i++;
              if (i === l) i = 0;
              textDiv.innerHTML = annotations[i];
            }, 10000);
        } );
    },
    error: function onError() {
        console.log( 'Viewer error' );
    },
    autostart: 1,
    camera: 0,
    preload: 1,
    scrollwheel: 0
  } );
}
</script>

</body>
</html>
