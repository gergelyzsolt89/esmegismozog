<!DOCTYPE html>
<html>
  <head>
    <title>És mégis mozog... az ember</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
    .w3-sidebar a {font-family: "Roboto", sans-serif}
    body,h1,h2,h3,h4,h5,h6,.w3-wide {font-family: "Montserrat", sans-serif;}
    </style>
    <script type="text/javascript" src="https://static.sketchfab.com/api/sketchfab-viewer-1.12.1.js"></script>
  </head>
<body class="w3-content" style="max-width:1200px">

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-bar-block w3-white w3-collapse w3-top" style="z-index:3;width:250px" id="mySidebar">
  <div class="w3-container w3-display-container w3-padding-16">
    <i onclick="w3_close()" class="fa fa-remove w3-hide-large w3-button w3-display-topright"></i>
    <h3 onclick="show_welcome_content()" style="cursor:pointer" class="w3-wide"><b>ÉS MÉGIS MOZOG</b></h3>
  </div>
  <div class="w3-padding-16 w3-container w3-display-container">
    <h4><b>Gyakorlat kategóriák</b></h4>
  </div>
  <div class="w3-large w3-text-grey" style="font-weight:bold">
    <a onclick="toggle_accordion(this)" href="javascript:void(0)" class="w3-button w3-block w3-white w3-left-align" id="tolo_gyakorlatok">
      Toló gyakorlatok <i class="fa fa-caret-right"></i>
    </a>
    <div id="tolo_gyakorlatok_acc" class="w3-bar-block w3-hide w3-padding-large w3-medium">
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="fekvotamasz_huzodzkodon_magas">Fekvőtámasz alacsony húzódzkodón (könnyebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="fekvotamasz_huzodzkodon_alacsony">Fekvőtámasz alacsony húzódzkodón (nehezebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="fekvotamasz_terdelesben">Fekvőtámasz térdelésben</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="teljes_fekvotamasz">Teljes fekvőtámasz</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button intermediate" id="szuk_fekvotamasz">Szűk fekvőtámasz</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button intermediate" id="felemas_fekvotamasz">Felemás fekvőtámasz</a>
    </div>
    <a onclick="toggle_accordion(this)" href="javascript:void(0)" class="w3-button w3-block w3-white w3-left-align" id="huzo_gyakorlatok">
      Húzó gyakorlatok <i class="fa fa-caret-right"></i>
    </a>
    <div id="huzo_gyakorlatok_acc" class="w3-bar-block w3-hide w3-padding-large w3-medium">
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="huzodzkodas_allva">Húzódzkodás állva</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button novice" id="vizszintes_huzodzkodas_konnyebb">Vízszintes húzódzkodás (könnyebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="vizszintes_huzodzkodas_nehezebb">Vízszintes húzódzkodás (nehezebb)</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="huzodzkodas_konnyitve">Húzódzkodás könnyítve</a>
      <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button beginner" id="lapocka_huzodzkodas">Lapocka húzódzkodás</a>
      <!-- <a href="#" onclick="load_exercise(this)" class="w3-bar-item w3-button intermediate" id="teljes_huzodzkodas">Teljes húzódzkodás</a> -->
    </div>
    <!-- <a href="#" class="w3-bar-item w3-button">Shoes</a> -->
  </div>
  <!-- <a href="#footer" class="w3-bar-item w3-button w3-padding">Contact</a> 
  <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding" onclick="document.getElementById('newsletter').style.display='block'">Newsletter</a> 
  <a href="#footer"  class="w3-bar-item w3-button w3-padding">Subscribe</a> -->
</nav>

<!-- Top menu on small screens -->
<header class="w3-bar w3-top w3-hide-large w3-black w3-large">
  <div onclick="show_welcome_content()" style="cursor:pointer" class="w3-bar-item w3-padding-24 w3-wide">ÉS MÉGIS MOZOG</div>
  <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding-24 w3-right" onclick="w3_open()"><i class="fa fa-bars"></i></a>
</header>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main w3-hide" id="exercise_content" style="margin-left:250px">

  <!-- Push down content on small screens -->
  <div class="w3-hide-large" style="margin-top:83px"></div>
  
  <!-- Top header -->
  <header class="w3-container w3-xlarge">
    <p class="w3-left" id="exercise-header">Fekvőtámasz térdelésben</p>
    <!-- <p class="w3-right">
      <i class="fa fa-search"></i>
    </p> -->
  </header>

  <!-- Sketchfab -->
  <div class="w3-display-container w3-container">
    <div class="sketchfab-container">
      <iframe class="sketchfab-iframe" src="" id="api-frame" frameborder="0" allow="autoplay; fullscreen; xr-spatial-tracking" xr-spatial-tracking execution-while-out-of-viewport execution-while-not-rendered web-share allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
    </div>
    <div class="w3-display-container w3-container w3-light-grey w3-small w3-center" style="height:90px">
      <p id="annotations-sync"></p>
    </div>
  </div>


  <!-- Pomodoro -->
  <div class="w3-hide" id="pomodoro" style="margin:auto">
    <div id="options">
      <div id="session">
        <i id="incrSession" class="fas fa-angle-double-up" onclick="incrSession()"></i>
        <span class="option-title">Edzés (perc)</span>
        <input id="sessionInput" type="number" value="5" max="60" min="1">
        <i id="decrSession" class="fas fa-angle-double-down" onclick="decrSession()"></i>
      </div>
      <div id="break">
        <i id="incrBreak" class="fas fa-angle-double-up" onclick="incrBreak()"></i>
        <span class="option-title">Pihenő (perc)</span>
        <input id="breakInput" type="number" value="1" max="10" min="1">
        <i id="decrBreak" class="fas fa-angle-double-down" onclick="decrBreak()"></i>
      </div>
    </div>
    <div id="clock">
      <div id="timer">
        <div id="title">Kész vagy?</div>
        <div id="countdown">
          <span id="minutes">5</span>
          <span id="seconds">00</span>
        </div>
        <div id="controls" class="reset">
          <div id="start"><i class="fas fa-play"></i> Indít</div>
          <div id="pause"><i class="fas fa-pause"></i> Szünet</div>
          <div id="reset"><i class="fas fa-sync-alt"></i> Visszaállít</div>
        </div>
      </div>
    </div>
  </div>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
  <!-- <script src='https://use.fontawesome.com/releases/v5.0.6/js/all.js'></script> -->
  <!-- <script  src="./script.js"></script> -->
  <script src="https://kit.fontawesome.com/8e657c9401.js" crossorigin="anonymous"></script>
</div>

<div class="w3-main" id="welcome_content" style="margin-left:250px">

  <!-- Push down content on small screens -->
  <div class="w3-hide-large" style="margin-top:83px"></div>
  
  <!-- Top header -->
  <header class="w3-container w3-xlarge">
    <p class="w3-left">Üdv az oldalon!</p>
    <!-- <p class="w3-right">
      <i class="fa fa-search"></i>
    </p> -->
  </header>

  <div class="w3-display-container w3-container">
    <p>Ezen a weboldalon több saját testsúlyos gyakorlat 3D-s animációját láthatod.</p>
    <p class="w3-hide-large">
      A gyakorlatok kategóriákba vannak sorolva, amiket a jobb felső sarokban lenyitható menüben érhetsz el.
      A kategóriákon belül fentről lefelé egyre nehezebbek a gyakorlatok, ezt színkóddal is jelöltük:
    </p>
    <p class="w3-hide-small w3-hide-medium">
      A gyakorlatok kategóriákba vannak sorolva, amiket a bal oldalon található menüben érhetsz el.
      A kategóriákon belül fentről lefelé egyre nehezebbek a gyakorlatok, ezt színkóddal is jelöltük:
    </p>
    <p class="novice" style="margin-left: 25px;padding-left:10px">
      Teljesen kezdő
    </p>
    <p class="beginner" style="margin-left: 25px;padding-left:10px">
      Kezdő
    </p>
    <p class="intermediate" style="margin-left: 25px;padding-left:10px">
      Középhaladó
    </p>
    <p class="advanced" style="margin-left: 25px;padding-left:10px">
      Haladó
    </p>
    <p class="elite" style="margin-left: 25px;padding-left:10px">
      Elit
    </p>
  </div>

</div>

<!-- Subscribe section -->
<!-- <div class="w3-container w3-black w3-padding-32">
<h1>Subscribe</h1>
<p>To get special offers and VIP treatment:</p>
<p><input class="w3-input w3-border" type="text" placeholder="Enter e-mail" style="width:100%"></p>
<button type="button" class="w3-button w3-red w3-margin-bottom">Subscribe</button>
</div> -->

<!-- Footer -->
<!-- <footer class="w3-padding-64 w3-light-grey w3-small w3-center" id="footer">
  <div class="w3-row-padding">
    <div>
      <h4>Kapcsolat</h4>
      <p>Kérdésed van? Írj bátran!</p>
      <form action="/action_page.php" target="_blank">
        <p><input class="w3-input w3-border" type="text" placeholder="Név" name="Name" required></p>
        <p><input class="w3-input w3-border" type="text" placeholder="Email" name="Email" required></p>
        <p><input class="w3-input w3-border" type="text" placeholder="Tárgy" name="Subject" required></p>
        <p><input class="w3-input w3-border" type="text" placeholder="Üzenet" name="Message" required></p>
        <button type="submit" class="w3-button w3-block w3-black">Küldés</button>
      </form>
    </div>

    <div class="w3-col s4">
      <h4>About</h4>
      <p><a href="#">About us</a></p>
      <p><a href="#">We're hiring</a></p>
      <p><a href="#">Support</a></p>
      <p><a href="#">Find store</a></p>
      <p><a href="#">Shipment</a></p>
      <p><a href="#">Payment</a></p>
      <p><a href="#">Gift card</a></p>
      <p><a href="#">Return</a></p>
      <p><a href="#">Help</a></p>
    </div>

    <div class="w3-col s4 w3-justify">
      <h4>Store</h4>
      <p><i class="fa fa-fw fa-map-marker"></i> Company Name</p>
      <p><i class="fa fa-fw fa-phone"></i> 0044123123</p>
      <p><i class="fa fa-fw fa-envelope"></i> ex@mail.com</p>
      <h4>We accept</h4>
      <p><i class="fa fa-fw fa-cc-amex"></i> Amex</p>
      <p><i class="fa fa-fw fa-credit-card"></i> Credit Card</p>
      <br>
      <i class="fa fa-facebook-official w3-hover-opacity w3-large"></i>
      <i class="fa fa-instagram w3-hover-opacity w3-large"></i>
      <i class="fa fa-snapchat w3-hover-opacity w3-large"></i>
      <i class="fa fa-pinterest-p w3-hover-opacity w3-large"></i>
      <i class="fa fa-twitter w3-hover-opacity w3-large"></i>
      <i class="fa fa-linkedin w3-hover-opacity w3-large"></i>
    </div>
  </div>
</footer> -->

<!-- <div class="w3-black w3-center w3-padding-24">Made with <a href="https://www.w3schools.com/spaces" title="W3.CSS" target="_blank" class="w3-hover-opacity">W3Schools Spaces</a></div> -->

<!-- End page content -->

<!-- Newsletter Modal -->
<!-- <div id="newsletter" class="w3-modal">
  <div class="w3-modal-content w3-animate-zoom" style="padding:32px">
    <div class="w3-container w3-white w3-center">
      <i onclick="document.getElementById('newsletter').style.display='none'" class="fa fa-remove w3-right w3-button w3-transparent w3-xxlarge"></i>
      <h2 class="w3-wide">NEWSLETTER</h2>
      <p>Join our mailing list to receive updates on new arrivals and special offers.</p>
      <p><input class="w3-input w3-border" type="text" placeholder="Enter e-mail"></p>
      <button type="button" class="w3-button w3-padding-large w3-red w3-margin-bottom" onclick="document.getElementById('newsletter').style.display='none'">Subscribe</button>
    </div>
  </div>
</div> -->

<script>
// Accordion 
function toggle_accordion(element) {
  const acc = document.getElementById(element.id+"_acc");
  if (acc.classList.contains("w3-show")) {
    acc.classList.remove("w3-show");
    element.innerHTML = element.innerText + '<i class="fa fa-caret-right"></i>';
  } else {
    acc.classList.add("w3-show");
    element.innerHTML = element.innerText + '<i class="fa fa-caret-down"></i>';
  }
}

// Click on the "Jeans" link on page load to open the accordion for demo purposes
/*document.getElementById("tolo_gyakorlatok").click();
document.getElementById("fekvotamasz_terdelesben").click();*/


// Open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}
 
function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}

// Change content
function show_exercise_content() {
  const exercise_content = document.getElementById("exercise_content")
  if (exercise_content.classList.contains("w3-hide")) {
    exercise_content.classList.remove("w3-hide");
    document.getElementById("welcome_content").classList.add("w3-hide");
  }
  w3_close();
}

function show_welcome_content() {
  const welcome_content = document.getElementById("welcome_content")
  if (welcome_content.classList.contains("w3-hide")) {
    welcome_content.classList.remove("w3-hide");
    document.getElementById("exercise_content").classList.add("w3-hide");
  }
  const active_exercise_node = document.getElementById("active-exercise");
  if (active_exercise_node) {
    active_exercise_node.parentElement.classList.remove("w3-light-grey");
    active_exercise_node.remove();
  }
  w3_close();
}

var annotations_interval_id = -1;

function load_exercise(element) {
  const uids = {
    "fekvotamasz_huzodzkodon_magas": 'ca8591b7c59d47efaeca9c2b1e9e7fd1',
    "fekvotamasz_huzodzkodon_alacsony": 'acdd1a1c25f24742af3da28eedb1fd85',
    "fekvotamasz_terdelesben": '6555abb675d44898b73508ccd77959f0',
    "teljes_fekvotamasz": 'd9cd460de2514220bc1ebda84c578bfb',
    "szuk_fekvotamasz": '88bbb3554a3b491ba241a0d310d141c3',
    "felemas_fekvotamasz": '0df5638884044d60a26100f021fa4a50',
    "huzodzkodas_allva": '5c8622be369640858ed6947d07701e6b',
    "vizszintes_huzodzkodas_konnyebb": '84fccca398204a018d2b6d228fd72e66',
    "vizszintes_huzodzkodas_nehezebb": 'ed57a8e2c5c94e4881fb550f536c86fc',
    "huzodzkodas_konnyitve": '3441348df68f41e18e48f5357294fc52',
    "lapocka_huzodzkodas": '16efd5cc01f743748299b46ee3e26e89'
  }

  const all_annotations = {
    "fekvotamasz_huzodzkodon_magas": [
      'Figyelj arra, hogy végig feszesen tartsd a törzsizmaid, beleértve a farizmokat is. A válltól a bokáig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A könyököd végig maradjon a tested mellett.',
      'A kiinduló helyzetben ne állj teljesen függőlegesen, maradjanak az izmok feszesen.'
    ],
    "fekvotamasz_huzodzkodon_alacsony": [
      'Figyelj arra, hogy végig feszesen tartsd a törzsizmaid, beleértve a farizmokat is. A válltól a bokáig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A könyököd végig maradjon a tested mellett.',
      'A mellkas majdnem megérinti a rudat az alsó pozícióban, a kiinduló helyzetben a könyökök szinte teljes nyújtva vannak.'
    ],
    "fekvotamasz_terdelesben": [
      'Figyelj arra, hogy végig feszesen tartsd a törzsizmaid, beleértve a farizmokat is. A válltól a térdig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A könyököd végig maradjon a tested mellett.',
      'A lábfejek lehetnek a levegőben, de a talajon is lehetnek lábujjhegyen. Ez utóbbi segíthet feszesebben tartani az alsó testet.',
      'Markold meg a talajt, ahogy a könnyebb gyakorlatoknál a rudat. A tenyér hüvelykujj felőli részét is végig tartsd a talajon.'
    ],
    "teljes_fekvotamasz": [
      'Tartsd végig feszesen a törzsizmaid, beleértve a farizmokat is. A válltól a bokáig próbáld egy vonalban tartani a tested a gyakorlat közben.',
      'A térdek végig legyenek nyújtva, esetleg minimálisan hajlítva.',
      'Ha ebben a pozícióban valamiért fájdalmat érzel a csuklódban, átmenetileg megpróbálhatod öklön végezni a gyakorlatot.',
      'A nyak maradjon természetes szögben, nem szükséges megfeszíteni vagy megemelni a fejet. De ne lógasd a fejed.',
      'A könyököd végig maradjon a tested mellett.',
      'Markold meg a talajt, a tenyér hüvelykujj felőli részét is végig tartsd a talajon.'
    ],
    "szuk_fekvotamasz": [
      'Tartsd végig feszesen a törzsizmaid, beleértve a farizmokat is.',
      'A térdek végig legyenek nyújtva, esetleg minimálisan hajlítva.',
      'A tenyerek itt már nem párhuzamosak egymással, a mutatóujjak össze is érhetnek.',
      'A könyök a test mellett marad, az alkar az ujjak vonalában legyen.',
      'A tenyér hüvelykujj felőli részét is végig tartsd a talajon. Ennél a gyakorlatnál ez nehezebb!'
    ],
    "felemas_fekvotamasz": [
      'Tartsd végig feszesen a törzsizmaid, beleértve a farizmokat is.',
      'A térdek végig legyenek nyújtva, esetleg minimálisan hajlítva.',
      'A két kar nem egyformán dolgozik: a váll alatt maradó karnak kell a munka nagy részét elvégeznie.',
      'A kiinduló helyzetben nyújtott kar segít, de most még az alsó pozícióban behajlíthatod.',
      'A segítő kar minél távolabb van a testtől, annál kevesebbet tud segíteni.'
    ],
    "huzodzkodas_allva": [
      ''
    ],
    "vizszintes_huzodzkodas_konnyebb": [
      ''
    ],
    "vizszintes_huzodzkodas_nehezebb": [
      ''
    ],
    "huzodzkodas_konnyitve": [
      ''
    ],
    "lapocka_huzodzkodas": [
      ''
    ]
  }

  show_exercise_content();

  const exercise_header = document.getElementById( 'exercise-header' );
  exercise_header.innerText = element.innerText;
  const active_exercise_node = document.getElementById("active-exercise");
  if (active_exercise_node) {
    active_exercise_node.parentElement.classList.remove("w3-light-grey");
    active_exercise_node.remove();
  }
  element.innerHTML = '<i class="fa fa-caret-right w3-margin-right" id="active-exercise"></i>'+element.innerText;
  element.classList.add("w3-light-grey");

  reset();
  clearInterval(annotations_interval_id);
  var textDiv = document.getElementById('annotations-sync');
  textDiv.innerHTML = '';

  const iframe = document.getElementById( 'api-frame' );
  const uid = uids[element.id];
  const annotations = all_annotations[element.id];
  
  // By default, the latest version of the viewer API will be used.
  var client = new Sketchfab( iframe );
  // Alternatively, you can request a specific version.
  // var client = new Sketchfab( '1.12.1', iframe );
  
  client.init( uid, {
    success: function onSuccess( api ){
        api.addEventListener( 'viewerready', function() {
            
            // API is ready to use
            // Insert your code here
            // console.log( 'Viewer is ready' );
            
            // set BeStrong texture on models
            api.getMaterialList(function (err, materials) {
              for (var i = 0; i < materials.length; i++) {
                var m = materials[i];
                if (m.name == 'GEO-snow_shirt') {
                  api.addTexture('https://gergelyzsolt89.github.io/esmegismozog/GEO-snow_shirt.png', function(err, textureUid) {
                      if (!err) {
                          m.channels.AlbedoPBR.texture = {uid: textureUid};
                          m.channels.AlbedoPBR.color = false;
                          api.setMaterial(m);
                      }
                  });
                  break;
                }
              }
            });
            
            /*api.getAnnotationList(function (err, annotations) {
              if (!err) {
                console.log(annotations);
              }
              var textDiv = document.getElementById('annotations-sync');
              for (var k = 0; k < annotations.length; k++) {
                api.hideAnnotation(k);
              }
              /*api.addEventListener('animationPlay', function() {
                  for (var k = 0; k < annotations.length; k++) {
                    api.hideAnnotation(k);
                  }
              });
              api.addEventListener('animationStop', function() {
                  for (var k = 0; k < annotations.length; k++) {
                    api.showAnnotation(k);
                  }
              });*\/
              /*api.addEventListener('annotationSelect', function (info) {
                if (info === -1) {
                  textDiv.innerHTML = '';
                  return;
                }
                console.log('annotationSelect', info, annotations[info]);
                textDiv.innerHTML = annotations[info].name + (annotations[info].content ? annotations[info].content.rendered : '');
              });*\/
              var l = annotations.length;
              var i = 0;
              textDiv.innerHTML = (annotations[i].content ? annotations[i].content.rendered : '');
              setInterval(function () {
                i++;
                if (i === l) i = 0;
                textDiv.innerHTML = (annotations[i].content ? annotations[i].content.rendered : '');
              }, 10000);
            });*/
            var l = annotations.length;
            var i = 0;
            textDiv.innerHTML = annotations[i];
            annotations_interval_id = setInterval(function () {
              i++;
              if (i === l) i = 0;
              textDiv.innerHTML = annotations[i];
            }, 10000);
        } );
    },
    error: function onError() {
        console.log( 'Viewer error' );
    },
    autostart: 1,
    camera: 0,
    preload: 1,
    scrollwheel: 0
} );
}

let $title = $("#title"),
      $controls = $("#controls"),
      $options = $("#options"),
      $minutes = $("#minutes"),
      $seconds = $("#seconds"),
      $start = $("#start"),
      $pause = $("#pause"),
      $reset = $("#reset"),
      $incrSession = $("#incrSession"),
      $sessionInput = $("#sessionInput"),
      $decrSession = $("#decrSession"),
      $incrBreak = $("#incrBreak"),
      $breakInput = $("#breakInput"),
      $decrBreak = $("#decrBreak"),
      breakLength = 1 * 60,
      breakMax = 10,
      breakMin = 1,
      sessionLength = 5 * 60,
      sessionMax = 60,
      sessionMin = 2,
      sessionNum = 0,
      countdown,
      countType,
      remainingTime = sessionLength;

init();

  function init(){
    /*
    $incrSession.click(() => incrSession());
    $decrSession.click(() => decrSession());
    $incrBreak.click(() => incrBreak());
    $decrBreak.click(() => decrBreak());
    */
    $sessionInput.on("change", e => updateSession(e.target.value));
    $breakInput.on("change", e => updateBreak(e.target.value));
    $start.click(() => { if (countType === "break"){ startBreak(); } else { startSession(); } });
    $pause.click(() => pause());
    $reset.click(() => reset());
  }
  function startSession(){
    sessionNum++;
    countType = "session";
    $options.slideUp(143);
    $controls.removeClass().addClass("started");
    $title.fadeOut(43, function(){
      $(this).html(sessionNum + ". Sorozat").fadeIn();
    });
    start(remainingTime || sessionLength);
  }
  function startBreak(){
    countType = "break";
    $title.fadeOut(43, function(){
      $(this).html(sessionNum + ". Pihenő").fadeIn();
    });
    start(remainingTime || breakLength);
  }
  function start(timeLeft){
    clearInterval(countdown);
    countdown = setInterval(() => {
      timeLeft--;
      remainingTime = timeLeft;
      let minLeft = Math.floor(timeLeft / 60),
          secLeft = timeLeft - minLeft * 60;
      updateMinutes(minLeft);
      updateSeconds(secLeft < 10 ? "0" + secLeft : secLeft);
      if (timeLeft < 1){
        if (countType === "session"){
          startBreak(breakLength);
        } else {
          startSession();
        }
      }
    }, 1000);
  }
  function pause(){
    sessionNum--;
    clearInterval(countdown);
    //$options.slideDown(143);
    $controls.removeClass().addClass("paused");
    $title.fadeOut(43, function(){
      $(this).html("Szünet").fadeIn();
    });
  }
  function reset(){
    clearInterval(countdown);
    $options.slideDown(143);
    updateMinutes(sessionLength / 60);
    updateSeconds("00");
    countType = undefined;
    $controls.removeClass().addClass("reset");
    $title.html("Kész vagy?");
    remainingTime = sessionLength;
  }
  function incrSession(){
    let num = Number($sessionInput.val());
    num = num + (num === sessionMax ? 0 : 1);
    sessionLength = num * 60;
    updateSession(num);
    updateMinutes(num);
    updateSeconds("00");
    reset();
  }
  function decrSession(){
    let num = Number($sessionInput.val());
    num = num - (num === sessionMin ? 0 : 1);
    sessionLength = num * 60;
    updateSession(num);
    updateMinutes(num);
    updateSeconds("00");
    reset();
  }
  function incrBreak(){
    let num = Number($breakInput.val());
    num = num + (num === breakMax ? 0 : 1);
    breakLength = num * 60;
    updateBreak(num);
    reset();
  }
  function decrBreak(){
    let num = Number($breakInput.val());
    num = num - (num === breakMin ? 0 : 1);
    breakLength = num * 60;
    updateBreak(num);
    reset();
  }
  function updateMinutes(num){
    $minutes.text(num);
  }
  function updateSeconds(num){
    $seconds.text(num);
  }
  function updateSession(num){
    num = num < sessionMin ? sessionMin : num > sessionMax ? sessionMax : num;
    $sessionInput.val(num).blur();
    updateMinutes(num);
    updateSeconds("00");
    sessionLength = num * 60;
    reset();
  }
  function updateBreak(num){
    $breakInput.val(num < breakMin ? breakMin : num > breakMax ? breakMax : num).blur();
    breakLength = num * 60;
    reset();
  }
</script>

</body>
</html>
